name: Purge Old Artifacts

on:
  # Allow manual trigger from the UI (crucial for your immediate fix)
  workflow_dispatch:
  # Optional: Run automatically every night at midnight UTC
  schedule:
    - cron: '0 0 * * *'

permissions:
  actions: write  # Strictly required to delete artifacts

jobs:
  cleanup:
    runs-on: ubuntu-latest
    steps:
      - name: Delete artifacts older than 2 days
        uses: jimschubert/delete-artifacts-action@v1
        with:
          # The important part: How far back to keep?
          older_than: '2 days'
          
          # Optional safety features:
          # dry_run: false       # Set to 'true' if you want to see what WOULD be deleted first
          log_level: 'info'      # Gives you clear logs of what got nuked
